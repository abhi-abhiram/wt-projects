---
import Layout from '../../layouts/Layout.astro';
import Main from '../../layouts/Main.astro';

---

<Layout title='Projects | Form Validation' >
    <Main>
        <h2>Sign Up</h2>
            <form id="signup" action="https://formspree.io/f/xnqlqzqk" method="POST" >
                <label for="email">Email</label>
                <input type="email" id="email" name="email" placeholder="Email" required />
                <label for="password">Password</label>
                <input type="password" id="password" name="password" placeholder="Password" required />
                <button type="submit">Sign up</button>
            </form>
            <p id="message"></p>
    </Main>
</Layout>


<script>

if(document){
    const form = document.getElementById("signup");

form.addEventListener("submit", (e) => {
    e.preventDefault();
    validate();
});
}

function validate() {
    var email = document.getElementById("email").value;
    var password = document.getElementById("password").value;
    var pattern = /^[^ ]+@[^ ]+\.[a-z]{2,3}$/;

    if (email.match(pattern)) {
        document.getElementById("email").style.border = "2px solid green";
    } else {
        document.getElementById("email").style.border = "2px solid red";
    }

    if (password.length < 8) {
        document.getElementById("password").style.border = "2px solid red";
        document.getElementById("message").innerHTML =
            "Password must be at least 8 characters";
        document.getElementById("message").style.color = "red"; 
        return false;
    } else {
        document.getElementById("password").style.border = "2px solid green";
    }

}
</script>
